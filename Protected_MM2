local screenGui = script.Parent
local loadingText = screenGui:WaitForChild("LoadingText")
local progressBar = screenGui:WaitForChild("Frame")
local fillBar = progressBar:WaitForChild("Frame")

local loadingPhrases = {
	"Loading map...",
	"Preparing weapons...",
	"Choosing murderer...",
	"Sharpening knives...",
	"Detective loading...",
	"Teleporting players...",
	"Spawning characters...",
	"Calculating roles...",
	"Finalizing setup...",
	"Almost ready..."
}

-- Set up blur
local blur = game.Lighting:FindFirstChildOfClass("BlurEffect")
if not blur then
	blur = Instance.new("BlurEffect")
	blur.Size = 24
	blur.Parent = game.Lighting
end

-- Show GUI
screenGui.Enabled = true
fillBar.Size = UDim2.new(0, 0, 1, 0)

local duration = 600 -- 10 minutes
local startTime = tick()

-- Loading animation
task.spawn(function()
	while tick() - startTime < duration do
		for _, phrase in pairs(loadingPhrases) do
			if tick() - startTime >= duration then break end
			loadingText.Text = phrase
			wait(1.5)
		end
	end
end)

-- Progress bar animation
while tick() - startTime < duration do
	local elapsed = tick() - startTime
	local percent = math.clamp(elapsed / duration, 0, 1)
	fillBar.Size = UDim2.new(percent, 0, 1, 0)
	wait(0.1)
end

-- Hide loading screen and remove blur
screenGui.Enabled = false
blur:Destroy()
